<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ScriptGuard</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ScriptGuard</h1>
      <div class="domain" id="currentDomain">Loading...</div>
    </header>
    
    <!-- Onboarding Section (shown on first run) -->
    <div class="onboarding-section" id="onboardingSection" style="display: none;">
      <h2>Choose Your Privacy Level</h2>
      <div class="onboarding-step">
        <p>We classify cookies to help you manage your privacy. Select a preset below:</p>
      </div>
      
      <div class="preset-grid" id="presetGrid">
        <!-- Presets will be populated here by JavaScript -->
      </div>
      
      <div class="onboarding-actions">
        <button id="confirmPreset" class="btn primary">Continue</button>
      </div>
    </div>
    
    <!-- Tab Navigation -->
    <div class="tabs-nav" id="tabsNav">
      <button class="tab-btn active" data-tab="policy">Policy</button>
      <button class="tab-btn" data-tab="cookies">Cookies</button>
      <button class="tab-btn" data-tab="logs">Logs</button>
    </div>
    
    <!-- Tab Content -->
    <div class="tabs-content">
      <!-- Policy Tab -->
      <div class="tab-pane active" id="policy-tab">
        <div class="policy-section">
          <h2>‚öôÔ∏è Policy for this site</h2>
          
          <!-- Preset Selector -->
          <div class="preset-selector">
            <label for="policy-presets">Select Policy Preset:</label>
            <select id="policy-presets">
              <option value="essential">Essential</option>
              <option value="privacy_first">Privacy First</option>
              <option value="balanced">Balanced</option>
              <option value="permissive">Permissive</option>
              <option value="custom">Custom</option>
            </select>
          </div>
          
          <div class="toggle-item">
            <span class="label">Network</span>
            <label class="switch">
              <input type="checkbox" id="toggleNetwork" checked>
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="toggle-item">
            <span class="label">Storage</span>
            <label class="switch">
              <input type="checkbox" id="toggleStorage" checked>
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="toggle-item">
            <span class="label">Cookies</span>
            <label class="switch">
              <input type="checkbox" id="toggleCookies" checked>
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="toggle-item">
            <span class="label">DOM Mode</span>
            <select id="domMode">
              <option value="full">Full</option>
              <option value="readonly">Read-only</option>
              <option value="none">Blocked</option>
            </select>
          </div>
          
          <!-- Advanced Controls Section -->
          <div class="advanced-controls-section">
            <button id="toggleAdvanced" class="btn btn-toggle">‚ñº Advanced Controls</button>
            <div id="advancedControls" class="advanced-controls" style="display: none;">
              
              <!-- Network Capabilities -->
              <div class="control-group">
                <h4>üåê Network Capabilities</h4>
                <label><input type="checkbox" id="fetch" checked> Fetch API</label>
                <label><input type="checkbox" id="xhr" checked> XMLHttpRequest</label>
                <label><input type="checkbox" id="websocket" checked> WebSocket</label>
                <label><input type="checkbox" id="beacon" checked> Beacon</label>
              </div>
              
              <!-- Geolocation -->
              <div class="control-group">
                <h4>üìç Geolocation</h4>
                <label><input type="checkbox" id="geolocation"> Enable Geolocation Access</label>
              </div>
              
              <!-- Camera & Microphone -->
              <div class="control-group">
                <h4>üì∑ Camera & Microphone</h4>
                <label><input type="checkbox" id="camera"> Enable Camera Access</label>
                <label><input type="checkbox" id="microphone"> Enable Microphone Access</label>
              </div>
              
              <!-- Clipboard & Notifications -->
              <div class="control-group">
                <h4>üìã Clipboard & Notifications</h4>
                <label><input type="checkbox" id="clipboard"> Enable Clipboard Access</label>
                <label><input type="checkbox" id="notifications"> Enable Notifications</label>
              </div>
              
              <!-- WebRTC -->
              <div class="control-group">
                <h4>üì° WebRTC</h4>
                <label><input type="checkbox" id="webrtc"> Enable WebRTC</label>
              </div>
              
              <!-- Evaluation & Script Loading -->
              <div class="control-group">
                <h4>‚ö° Code Execution</h4>
                <label><input type="checkbox" id="eval"> Allow eval()</label>
                <label><input type="checkbox" id="inline"> Allow Inline Scripts</label>
                <label><input type="checkbox" id="external"> Allow External Scripts</label>
              </div>
              
            </div>
          </div>
          
      <button id="allowOnce" class="btn allow-once">Allow once (5 min)</button>
      <button id="savePolicy" class="btn primary">Save Policy</button>
        </div>
      </div>
      
      <!-- Cookies Tab -->
      <div class="tab-pane" id="cookies-tab">
        <div class="cookies-section">
          <div class="cookies-header">
            <h2>üç™ Cookies on this site</h2>
            <button id="refreshCookies" class="btn btn-small">Refresh</button>
          </div>
          <div id="cookiesList">
            <div class="empty-message">No cookies detected yet</div>
          </div>
        </div>
      </div>
      
      <!-- Logs Tab -->
      <div class="tab-pane" id="logs-tab">
        <div class="logs-section">
          <div class="logs-header">
            <h2>üìã Recent Activity</h2>
            <button id="refreshLogs" class="btn btn-small">Refresh</button>
          </div>
          <div class="logs-container" id="logsContainer">
            <!-- Logs will appear here -->
          </div>
        </div>
      </div>
    </div>
    
    <footer>
      <button id="openDashboard" class="btn secondary">Open Dashboard</button>
    </footer>
  </div>
  
  <script src="../utils/cookie_classifier.js"></script>
  <script src="popup.js"></script>
</body>
</html>